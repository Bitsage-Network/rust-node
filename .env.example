# =============================================================================
# BitSage Network - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control!
#
# Required variables will cause the node to panic on startup if not set
# when BITSAGE_ENV=production
# =============================================================================

# -----------------------------------------------------------------------------
# Environment Mode
# -----------------------------------------------------------------------------
# Options: production, mainnet, development, dev
# CRITICAL: Set to "production" or "mainnet" for real deployments
BITSAGE_ENV=development

# -----------------------------------------------------------------------------
# Security - REQUIRED IN PRODUCTION
# -----------------------------------------------------------------------------
# JWT secret for API authentication (min 32 chars recommended)
# REQUIRED in production - node will panic if not set
JWT_SECRET=your-secure-jwt-secret-min-32-characters

# Keystore password for signing transactions
# REQUIRED in production - node will panic if not set
KEYSTORE_PASSWORD=your-secure-keystore-password

# -----------------------------------------------------------------------------
# Starknet Configuration
# -----------------------------------------------------------------------------
# Network: mainnet or sepolia
STARKNET_NETWORK=sepolia

# RPC URL - REQUIRED in production (must not contain "YOUR_API_KEY")
# Recommended providers: Alchemy, Infura, Lava, or your own node
# Mainnet: https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_7/YOUR_KEY
# Sepolia: https://rpc.starknet-testnet.lava.build
STARKNET_RPC_URL=https://rpc.starknet-testnet.lava.build

# -----------------------------------------------------------------------------
# Contract Addresses - REQUIRED IN PRODUCTION
# -----------------------------------------------------------------------------
# All addresses must be valid hex strings starting with 0x
# Node will panic if any are 0x0...0 in production mode

# Core contracts (Sepolia deployment - 2025-01-20)
SAGE_TOKEN_ADDRESS=0x072349097c8a802e7f66dc96b95aca84e4d78ddad22014904076c76293a99850
JOB_MANAGER_ADDRESS=0x355b8c5e9dd3310a3c361559b53cfcfdc20b2bf7d5bd87a84a83389b8cbb8d3
CDC_POOL_ADDRESS=0x1f978cad424f87a6cea8aa27cbcbba10b9a50d41e296ae07e1c635392a2339
STAKING_CONTRACT_ADDRESS=0x28caa5962266f2bf9320607da6466145489fed9dae8e346473ba1e847437613

# Proof verification contracts
PROOF_VERIFIER_ADDRESS=0x17ada59ab642b53e6620ef2026f21eb3f2d1a338d6e85cb61d5bcd8dfbebc8b
STWO_VERIFIER_ADDRESS=0x52963fe2f1d2d2545cbe18b8230b739c8861ae726dc7b6f0202cc17a369bd7d

# Optional contracts
REPUTATION_CONTRACT_ADDRESS=0x4ef80990256fb016381f57c340a306e37376c1de70fa11147a4f1fc57a834de
FAUCET_CONTRACT_ADDRESS=0x62d3231450645503345e2e022b60a96aceff73898d26668f3389547a61471d3
PAYMENT_ROUTER_ADDRESS=0x6a0639e673febf90b6a6e7d3743c81f96b39a3037b60429d479c62c5d20d41
FRAUD_PROOF_ADDRESS=0x5d5bc1565e4df7c61c811b0c494f1345fc0f964e154e57e829c727990116b50
WORKER_STAKING_ADDRESS=0x28caa5962266f2bf9320607da6466145489fed9dae8e346473ba1e847437613
ESCROW_ADDRESS=0x7d7b5aa04b8eec7676568c8b55acd5682b8f7cb051f69c1876f0e5a6d8edfd4
FEE_MANAGER_ADDRESS=0x74344374490948307360e6a8376d656190773115a4fca4d049366cea7edde39
PRIVACY_POOLS_ADDRESS=0xd85ad03dcd91a075bef0f4226149cb7e43da795d2c1d33e3227c68bfbb78a7

# -----------------------------------------------------------------------------
# Deployer/Signer Account
# -----------------------------------------------------------------------------
# Account used for signing transactions
DEPLOYER_ADDRESS=0x0759a4374389b0e3cfcc59d49310b6bc75bb12bbf8ce550eb5c2f026918bb344
SIGNER_ACCOUNT_ADDRESS=0x0759a4374389b0e3cfcc59d49310b6bc75bb12bbf8ce550eb5c2f026918bb344

# Private key for signing (NEVER commit real private keys!)
# For production, use a keystore file instead
SIGNER_PRIVATE_KEY=

# Keystore file path (preferred over raw private key)
KEYSTORE_PATH=../BitSage-Cairo-Smart-Contracts/deployment/sepolia_keystore.json

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://bitsage:bitsage@localhost:5432/sage
DATABASE_MAX_CONNECTIONS=10

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8080

# TLS/HTTPS (required for production)
ENABLE_TLS=false
TLS_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
TLS_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# Rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# -----------------------------------------------------------------------------
# Coordinator Configuration
# -----------------------------------------------------------------------------
COORDINATOR_ID=coordinator-1
COORDINATOR_HOST=0.0.0.0
COORDINATOR_PORT=9000

# Worker management
MAX_WORKERS=100
WORKER_TIMEOUT_SECONDS=300
HEALTH_CHECK_INTERVAL_SECONDS=60

# -----------------------------------------------------------------------------
# Consensus Configuration
# -----------------------------------------------------------------------------
ENABLE_CONSENSUS=true
QUORUM_PERCENTAGE=67
VOTE_TIMEOUT_SECONDS=30
MAX_VALIDATORS=100

# -----------------------------------------------------------------------------
# GPU/Proof Generation
# -----------------------------------------------------------------------------
# Enable GPU acceleration for proof generation
ENABLE_GPU=true
# Multi-GPU mode for large proofs
ENABLE_MULTI_GPU=false
# Security bits for proofs (128 recommended)
PROOF_SECURITY_BITS=128

# -----------------------------------------------------------------------------
# Metrics & Monitoring
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
PROMETHEUS_ENDPOINT=0.0.0.0:9090

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: trace, debug, info, warn, error
RUST_LOG=info
# Specific module logging
# RUST_LOG=bitsage_node=debug,tower_http=info

# -----------------------------------------------------------------------------
# P2P Networking
# -----------------------------------------------------------------------------
P2P_PORT=4001
P2P_BOOTSTRAP_PEERS=

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable TEE (Trusted Execution Environment) support
ENABLE_TEE=false
# Enable privacy features
ENABLE_PRIVACY=true
# Enable proof pipeline for batch verification
ENABLE_PROOF_PIPELINE=true
